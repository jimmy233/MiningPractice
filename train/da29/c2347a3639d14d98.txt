int main()
{
   char VAR__819283[101][101];
   int  VAR_1238123;
   int  VAR__9290 = 0;

   cin >> VAR_1238123;
   for ( int VAR__53647 = 0; VAR__53647 <= ( VAR_1238123 - 1 ); VAR__53647++ )
   {
      for ( int VAR_9494 = 0; VAR_9494 <= ( VAR_1238123 - 1 ); VAR_9494++ )
      {
         cin >> VAR__819283[VAR__53647][VAR_9494];

         if ( VAR__819283[VAR__53647][VAR_9494] == '@' )
         {
            VAR__9290 = VAR__9290 + 1;
         }
      }
   }

   int VAR__1238129;
   cin >> VAR__1238129;
   for ( int VAR__temp = 2; VAR__temp <= VAR__1238129; VAR__temp++ )
   {
      for ( int VAR__53647 = 0; VAR__53647 <= ( VAR_1238123 - 1 ); VAR__53647++ )
      {
         for ( int VAR_9494 = 0; VAR_9494 <= ( VAR_1238123 - 1 ); VAR_9494++ )
         {
            if ((( VAR__819283[VAR__53647][VAR_9494] == '@' ) && (( VAR__53647 - 1 ) >= 0 )) && ( VAR__819283[VAR__53647 - 1][VAR_9494] == '.' ))
            {
               VAR__819283[VAR__53647 - 1][VAR_9494] = '%';
               VAR__9290 = VAR__9290 + 1;
            }

            if ((( VAR__819283[VAR__53647][VAR_9494] == '@' ) && ( VAR__53647 <= ( VAR_1238123 - 2 ))) && ( VAR__819283[VAR__53647 + 1][VAR_9494] == '.' ))
            {
               VAR__819283[VAR__53647 + 1][VAR_9494] = '%';
               VAR__9290 = VAR__9290 + 1;
            }

            if ((( VAR__819283[VAR__53647][VAR_9494] == '@' ) && ( VAR_9494 >= 1 )) && ( VAR__819283[VAR__53647][VAR_9494 - 1] == '.' ))
            {
               VAR__819283[VAR__53647][VAR_9494 - 1] = '%';
               VAR__9290 = VAR__9290 + 1;
            }

            if ((( VAR__819283[VAR__53647][VAR_9494] == '@' ) && ( VAR_9494 <= ( VAR_1238123 - 2 ))) && ( VAR__819283[VAR__53647][VAR_9494 + 1] == '.' ))
            {
               VAR__819283[VAR__53647][VAR_9494 + 1] = '%';
               VAR__9290 = VAR__9290 + 1;
            }
         }
      }

      for ( int VAR__53647 = 0; VAR__53647 <= ( VAR_1238123 - 1 ); VAR__53647++ )
      {
         for ( int VAR_9494 = 0; VAR_9494 <= ( VAR_1238123 - 1 ); VAR_9494++ )
         {
            if ( VAR__819283[VAR__53647][VAR_9494] == '%' )
            {
               VAR__819283[VAR__53647][VAR_9494] = '@';
            }
         }
      }
   }

   cout << VAR__9290;
   return 0;
}
