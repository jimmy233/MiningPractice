int  VAR__819283;
char s1[101];
char s2[101];
int main()
{
   int VAR_1238123;
   int VAR__1111;
   int VAR__53647;
   int VAR__21230;

   scanf("%d", &VAR_1238123);
   for ( VAR__1111 = 0; VAR__1111 < VAR_1238123; VAR__1111++ )
   {
      memset(s1, 0, 101);
      memset(s2, 0, 101);
      scanf("%s", s1);
      VAR__819283 = strlen(s1);
      int VAR__8444594[100] = { 0 };
      int VAR__19328        = 0;
      for ( VAR__53647 = 0; VAR__53647 < VAR__819283; VAR__53647++ )
      {
         if ( s1[VAR__53647] == '(' )
         {
            for ( VAR__21230 = VAR__53647; VAR__21230 < VAR__819283; VAR__21230++ )
            {
               if ( s1[VAR__21230] == '(' )
               {
                  VAR__8444594[VAR__53647]++;
               }
               else
               if ( s1[VAR__21230] == ')' )
               {
                  VAR__8444594[VAR__53647]--;
               }
            }
         }
      }

      for ( VAR__53647 = VAR__819283 - 1; VAR__53647 >= 0; VAR__53647-- )
      {
         if ( s1[VAR__53647] == ')' )
         {
            for ( VAR__21230 = VAR__53647; VAR__21230 >= 0; VAR__21230-- )
            {
               if ( s1[VAR__21230] == ')' )
               {
                  VAR__8444594[VAR__53647]++;
               }
               else
               if ( s1[VAR__21230] == '(' )
               {
                  VAR__8444594[VAR__53647]--;
               }
            }
         }
      }

      for ( VAR__53647 = 0; VAR__53647 < VAR__819283; VAR__53647++ )
      {
         if ( s1[VAR__53647] == ')' )
         {
            VAR__19328 = 0;
            for ( VAR__21230 = VAR__53647 - 1; VAR__21230 >= 0; VAR__21230-- )
            {
               if (( s1[VAR__21230] == ')' ) && ( VAR__8444594[VAR__21230] > 0 ))
               {
                  VAR__19328++;
               }
            }


            VAR__8444594[VAR__53647] -= VAR__19328;
         }
      }

      for ( VAR__53647 = VAR__819283 - 1; VAR__53647 >= 0; VAR__53647-- )
      {
         if ( s1[VAR__53647] == '(' )
         {
            VAR__19328 = 0;
            for ( VAR__21230 = VAR__53647 + 1; VAR__21230 < VAR__819283; VAR__21230++ )
            {
               if (( s1[VAR__21230] == '(' ) && ( VAR__8444594[VAR__21230] > 0 ))
               {
                  VAR__19328++;
               }
            }


            VAR__8444594[VAR__53647] -= VAR__19328;
         }
      }

      for ( VAR__53647 = 0; VAR__53647 < VAR__819283; VAR__53647++ )
      {
         if ( VAR__8444594[VAR__53647] > 0 )
         {
            if ( s1[VAR__53647] == '(' )
            {
               s2[VAR__53647] = '$';
            }
            else
            if ( s1[VAR__53647] == ')' )
            {
               s2[VAR__53647] = '?';
            }
         }
         else
         {
            s2[VAR__53647] = ' ';
         }
      }

      printf("%s\n", s1);
      for ( VAR__53647 = 0; VAR__53647 < VAR__819283; VAR__53647++ )
      {
         printf("%c", s2[VAR__53647]);
      }

      printf("\n");
   }
}
